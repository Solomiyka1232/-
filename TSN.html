<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TSN Studio | Versace HD Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=EB+Garamond:ital,wght@0,400;0,700;1,500&family=Oswald:wght@400;500;700&display=swap');

        :root { --tsn: #cc0000; --paper: #e3ddd0; --ink: #1a1a1a; }
        
        body { background: #0a0a0a; color: #fff; font-family: 'Oswald', sans-serif; margin: 0; padding: 0; }

        /* –ê–í–¢–û–†–°–¢–í–û */
        .site-header { text-align: center; padding: 15px; font-size: 10px; letter-spacing: 2px; color: #444; text-transform: uppercase; border-bottom: 1px solid #222; }
        .site-header span { color: var(--tsn); }

        /* –ù–ê–í–Ü–ì–ê–¶–Ü–Ø */
        .dock { position: fixed; bottom: 0; width: 100%; background: #111; display: flex; padding: 15px 0 25px; border-top: 2px solid #333; z-index: 1000; }
        .dock-btn { background: none; border: none; color: #555; font-size: 11px; font-weight: bold; text-transform: uppercase; display: flex; flex-direction: column; align-items: center; gap: 5px; flex: 1; }
        .dock-btn.active { color: var(--tsn); }
        .dock-btn b { font-size: 24px; font-style: normal; }

        #workspace { padding: 10px 10px 120px; display: flex; flex-direction: column; gap: 30px; align-items: center; }
        .card { width: 100%; max-width: 550px; background: #1a1a1a; border-radius: 15px; overflow: hidden; }

        /* –ö–û–ù–¢–ï–ô–ù–ï–† –†–ï–ù–î–ï–†–£ (HD FIX) */
        .render-box { 
            width: 100%; 
            position: relative; 
            background: var(--paper); 
            color: var(--ink); 
            overflow: hidden;
            image-rendering: -webkit-optimize-contrast; /* –î–ª—è —á—ñ—Ç–∫–æ—Å—Ç—ñ */
        }

        /* –ì–ê–ó–ï–¢–ê */
        .news-layout { padding: 30px 25px; display: block; }
        .news-meta { display: flex; justify-content: space-between; font-size: 10px; font-weight: 700; border-bottom: 1px solid var(--ink); margin-bottom: 15px; }
        .logo { font-family: 'Montserrat', sans-serif; font-size: 45px; margin: 0; font-weight: 900; letter-spacing: -2px; text-align: center; }
        .logo span { color: var(--tsn); }
        .headline { font-family: 'Montserrat', sans-serif; font-size: 28px; text-align: center; margin: 15px 0; text-transform: uppercase; font-weight: 900; line-height: 1; border-top: 3px solid var(--ink); border-bottom: 3px solid var(--ink); padding: 10px 0; outline: none; }
        
        .news-columns { column-count: 2; column-gap: 20px; text-align: justify; font-family: 'EB Garamond', serif; }
        .lead-text { font-weight: 700; font-size: 19px; line-height: 1.2; margin-bottom: 10px; display: block; }
        .body-p { font-size: 16px; line-height: 1.25; margin-bottom: 10px; outline: none; }
        .quote { font-style: italic; border-top: 1px solid var(--tsn); border-bottom: 1px solid var(--tsn); padding: 10px 0; margin: 15px 0; font-size: 17px; font-weight: 500; }

        /* –§–û–¢–û */
        .photo-container { 
            width: 100%; aspect-ratio: 16 / 9; 
            background-color: #222; background-position: center; background-size: cover; 
            position: relative; margin: 15px 0;
        }

        /* –ï–§–Ü–† (TV) */
        .tv-layout { display: none; width: 100%; aspect-ratio: 16 / 9; background: #000; position: relative; }
        .live-badge { 
            position: absolute; top: 12px; left: 12px; display: flex; align-items: center; gap: 6px;
            background: rgba(204, 0, 0, 0.2); color: #ff4d4d; padding: 4px 10px; 
            font-size: 10px; font-weight: 800; border: 1px solid rgba(255, 77, 77, 0.4); border-radius: 4px;
            font-family: 'Montserrat', sans-serif;
        }
        .dot { width: 6px; height: 6px; background: #ff4d4d; border-radius: 50%; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        .tv-plates { position: absolute; bottom: 0; left: 0; width: 100%; display: flex; flex-direction: column; }
        .tsn-red { background: var(--tsn); color: #fff; padding: 3px 12px; font-weight: 900; font-size: 13px; width: fit-content; font-family: 'Montserrat'; }
        .info-white { background: #fff; color: #000; padding: 12px 18px; font-family: 'Montserrat', sans-serif; font-size: 18px; font-weight: 900; text-transform: uppercase; border-bottom: 6px solid var(--tsn); }

        /* –†–ï–ñ–ò–ú–ò */
        .mode-tv .news-layout { display: none; }
        .mode-tv .tv-layout { display: block; }
        .mode-tv .render-box { background: #000; }
        .mode-tv .photo-container { margin: 0; height: 100%; width: 100%; }

        /* –ö–ù–û–ü–ö–ò */
        .btns { display: flex; padding: 12px; gap: 10px; background: #1a1a1a; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 8px; background: #333; color: #fff; font-weight: bold; font-size: 11px; text-transform: uppercase; }
    </style>
</head>
<body class="mode-news">

    <div class="site-header">
        Developed by <span>G.Versace</span> sp√©cialement –¥–ª—è –¢–°–ù
    </div>

    <div id="workspace"></div>

    <div class="dock">
        <button class="dock-btn active" id="bn" onclick="setMode('news')"><b>üóûÔ∏è</b>–ì–∞–∑–µ—Ç–∞</button>
        <button class="dock-btn" id="bt" onclick="setMode('tv')"><b>üì∫</b>–ï—Ñ—ñ—Ä</button>
        <button class="dock-btn" onclick="add()" style="color:#2ecc71;"><b>‚ûï</b>–î–æ–¥–∞—Ç–∏</button>
        <button class="dock-btn" onclick="save()" style="color:#fff;"><b>üíæ</b>–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>

    <script>
        let counter = 0;

        function add() {
            counter++;
            const ws = document.getElementById('workspace');
            const card = document.createElement('div');
            card.className = 'card';
            card.id = `block-${counter}`;
            card.innerHTML = `
                <div class="render-box" id="area-${counter}">
                    <div class="news-layout">
                        <div class="news-meta"><span>‚Ññ ${200 + counter} / –°–ü–ï–¶–í–ò–ü–£–°–ö</span><span>${new Date().toLocaleDateString()}</span></div>
                        <div class="logo">–¢–°–ù<span>.</span>UA</div>
                        <div class="headline" contenteditable="true">–í–í–ï–î–Ü–¢–¨ –ó–ê–ì–û–õ–û–í–û–ö</div>
                        <div class="photo-container" id="p-news-${counter}" style="background-image: url('https://via.placeholder.com/800x450');"></div>
                        <div class="news-columns">
                            <div class="lead-text" contenteditable="true">–ì–æ–ª–æ–≤–Ω–∞ –Ω–æ–≤–∏–Ω–∞ –¥–Ω—è...</div>
                            <div class="body-p" contenteditable="true">–í–∞—à–∞ —Å—Ç–∞—Ç—Ç—è —É –¥–≤–æ—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö. –¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–ª–∞—à—Ç—É—î—Ç—å—Å—è.</div>
                            <div class="quote" contenteditable="true">"–í–∞–∂–ª–∏–≤–∞ —Ü–∏—Ç–∞—Ç–∞."</div>
                        </div>
                    </div>
                    <div class="tv-layout">
                        <div class="photo-container" id="p-tv-${counter}" style="background-image: url('https://via.placeholder.com/800x450');">
                            <div class="live-badge"><div class="dot"></div> –ù–ê–ñ–ò–í–û</div>
                            <div class="tv-plates">
                                <div class="tsn-red">–¢–°–ù</div>
                                <div class="info-white" contenteditable="true">–¢–ï–ö–°–¢ –¢–ò–¢–†–Ü–í</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="btns">
                    <button class="btn" onclick="pick(${counter})">üì∏ –§–æ—Ç–æ</button>
                    <button class="btn" onclick="del(${counter})" style="color:#ff4444">‚úï</button>
                    <input type="file" id="f-${counter}" style="display:none" accept="image/*" onchange="load(event, ${counter})">
                </div>
            `;
            ws.appendChild(card);
        }

        function pick(n) { document.getElementById(`f-${n}`).click(); }
        function load(e, n) {
            if(e.target.files[0]) {
                const r = new FileReader();
                r.onload = (f) => { 
                    const url = `url(${f.target.result})`;
                    document.getElementById(`p-news-${n}`).style.backgroundImage = url;
                    document.getElementById(`p-tv-${n}`).style.backgroundImage = url;
                };
                r.readAsDataURL(e.target.files[0]);
            }
        }
        function del(n) { document.getElementById(`block-${n}`).remove(); }

        function setMode(m) {
            document.body.className = 'mode-' + m;
            document.getElementById('bn').classList.toggle('active', m === 'news');
            document.getElementById('bt').classList.toggle('active', m === 'tv');
        }

        async function save() {
            const el = document.querySelectorAll('.render-box');
            for (let b of el) {
                // –ü–ê–†–ê–ú–ï–¢–†–ò –î–õ–Ø HD –Ø–ö–û–°–¢–Ü
                const canvas = await html2canvas(b, { 
                    scale: 3, // –ó–±—ñ–ª—å—à—É—î–º–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —É 3 —Ä–∞–∑–∏
                    useCORS: true, 
                    allowTaint: true,
                    backgroundColor: null,
                    scrollX: 0,
                    scrollY: -window.scrollY
                });
                
                const a = document.createElement('a');
                a.download = `TSN_HD_${Date.now()}.png`;
                a.href = canvas.toDataURL("image/png", 1.0); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —è–∫—ñ—Å—Ç—å
                a.click();
                await new Promise(r => setTimeout(r, 600));
            }
        }
        window.onload = add;
    </script>
</body>
</html>
